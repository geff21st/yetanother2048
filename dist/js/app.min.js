function Helper(){}function Field(t,e){this.CELLS_CNT=Math.floor(t)||4,this.CELL_CLS="cell",this.CELL_SEL="."+this.CELL_CLS,this.CELL_ITEM_SEL="."+this.CELL_CLS+"-wrap",this.BOX_CLS="box",this.BOX_SEL="."+this.BOX_CLS,this.BTN_SEL=".btn",this.LEFT_BTN_SEL=this.BTN_SEL+"_move-left",this.ATTR_COUNTER="data-counter",this.MIN_VAL=Math.floor(e)||2,this.cells=[],this.init(),this.setCallbacks()}Helper.__log=function(){console.log(arguments)},Helper.nearestPow2=function(t){return Math.pow(2,Math.round(Math.log(t)/Math.log(2)))},Field.prototype.init=function(){var t=$(this.CELL_ITEM_SEL+":first"),e=$(this.BOX_SEL);e.html("");for(var l=0;l<this.CELLS_CNT;l++){this.cells[l]=[];for(var i=0;i<this.CELLS_CNT;i++){var o=t.clone();o.appendTo(e),this.cells[l][i]={value:0,el:o,cell:o.find(this.CELL_SEL)}}}this.value(0,0,this.MIN_VAL),this.addInRandCell(),this.setValues()},Field.prototype.setValues=function(){var t=this;this.goThroughTable(function(e,l){t.cells[e][l].cell.attr(t.ATTR_COUNTER,t.value(e,l))})},Field.prototype.goThroughTable=function(t){if($.isFunction(t))for(var e=0;e<this.cells.length;e++)for(var l=0;l<this.cells[e].length;l++)t(e,l)},Field.prototype.row=function(t){return this.cells[t]},Field.prototype.value=function(t,e,l){return arguments.length>2?void(this.cells[t][e].value=Helper.nearestPow2(l)):this.cells[t][e].value},Field.prototype.addInRandCell=function(t){var e=Math.floor(Math.random()*this.CELLS_CNT),l=Math.floor(Math.random()*this.CELLS_CNT);return Helper.__log(e,l),this.value(e,l)?this.addInRandCell():(t=t||this.MIN_VAL,void this.value(e,l,Helper.nearestPow2(t)))},Field.prototype.moveRowLeft=function(t){for(var e,l=[!1,!1],i=this.row(t),o=i.length-1;o>=0;o--)e=this.value(t,o),e&&(!1!==l[0]&&e===l[1]&&(this.value(t,o,2*e),this.value(t,l[0],0)),l=[o,e])},Field.prototype.moveLeft=function(){for(var t=0;t<this.CELLS_CNT;t++)this.moveRowLeft(t);this.setValues()},Field.prototype.setCallbacks=function(){var t=this,e="click.2048_left";$(document).off(e).on(e,this.LEFT_BTN_SEL,function(e){e.preventDefault(),t.moveLeft()})},$(function(){window.__field=new Field,window.__field.value(0,1,2),window.__field.value(0,2,2),window.__field.value(0,3,2),window.__field.value(1,0,4),window.__field.value(1,1,0),window.__field.value(1,2,4),window.__field.value(1,3,4),window.__field.setValues(),console.log(__field.cells)});
//# sourceMappingURL=app.min.js.map
